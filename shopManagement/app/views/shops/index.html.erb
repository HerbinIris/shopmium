<%# app/views/shops/index.html.erb %>
<%= javascript_include_tag "index.js" %>
<h1>Listing Shops</h1>
<%= form_for_filterrific @filterrific, html: { id: 'filterrific-no-ajax-auto-submit' } do |f| %>
  <div>
    Search
      <%= f.text_field(
        :search_query,
    ) %>
  </div>
      Sorted by
         <%= f.select(:sorted_by, @filterrific.select_options[:sorted_by]) %>
  </div>
    Rayon 
      <%= f.fields_for :distance, OpenStruct.new(@filterrific.distance) do |distance_fields| %>
      <%= distance_fields.text_field :rayon %>
      <%= distance_fields.text_field :latitude %>
      <%= distance_fields.text_field :longitude %>
    <% end %>
  </div>
  <div>
    Plus proche
      <%= f.fields_for :nearest, OpenStruct.new(@filterrific.nearest) do |nearest_fields| %>
      <%= nearest_fields.text_field :nombre %>
      <%= nearest_fields.text_field :latitude %>
      <%= nearest_fields.text_field :longitude %>
    <% end %>
  </div>

  <div>
    <%= link_to(
      'Reset filters',
       reset_filterrific_url,
     ) %>
  </div>
  <%= f.submit 'Filter' %>
  <%= render_filterrific_spinner %>
<% end %>
<%= render(
  partial: 'shops/list',
  locals: { shops: @shops }
) %>

<%= link_to 'New Shop', new_shop_path %>



